<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
    <title>소수 복셀 슈터</title>
    <meta name="description" content="Three.js Voxel Shooter Game" />
    <link rel="stylesheet" href="./style.css" />
    <script type="importmap">
    {
        "imports": {
            "three": "https://cdn.jsdelivr.net/npm/three@0.181.2/build/three.module.js",
            "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.181.2/examples/jsm/"
        }
    }
</script>
</head>

<body>
    <!-- Game Container -->
    <div id="game-container" class="fullscreen-bg"></div>

    <!-- HUD Layer -->
    <div id="ui-hud" class="hud-layer hidden">

        <!-- Top Bar -->
        <div class="hud-top">
            <div class="hud-stats">
                <div class="glass-panel panel-cyan">
                    <h2 class="text-cyan">점수</h2>
                    <p id="score-value" class="value-text">0</p>
                </div>
                <!-- Timer UI -->
                <div class="glass-panel panel-yellow">
                    <h2 class="text-yellow">남은 시간</h2>
                    <p id="timer-value" class="value-text">60</p>
                </div>
            </div>

            <div class="glass-panel hud-instructions">
                <p>조작: <span class="text-white font-bold">W A S D</span> 이동</p>
                <p><span class="text-white font-bold">SPACE</span> 발사</p>
                <div style="margin-top: 0.5rem; border-top: 1px solid #4b5563; padding-top: 0.5rem;">
                    <p class="text-red font-bold">규칙:</p>
                    <p><span class="font-bold underline">소수(Prime)</span>는 쏘지 마세요 (예: 7, 13)</p>
                    <p><span class="font-bold underline">소수의 2배</span>도 쏘지 마세요 (예: 14, 26)</p>
                    <p class="text-green">나머지 합성수는 모두 파괴하세요!</p>
                    <p class="text-yellow" style="margin-top: 0.25rem;">1분 안에 150점 이상 획득해야 승리합니다!</p>
                </div>
            </div>
        </div>

        <!-- Mobile Controls (Bottom Layer) -->
        <div id="mobile-controls" class="mobile-controls-container">
            <!-- D-Pad -->
            <div class="dpad">
                <div class="dpad-btn-wrapper dpad-up">
                    <div class="control-btn" data-key="w">▲</div>
                </div>
                <div class="dpad-btn-wrapper dpad-down">
                    <div class="control-btn" data-key="s">▼</div>
                </div>
                <div class="dpad-btn-wrapper dpad-left">
                    <div class="control-btn" data-key="a">◀</div>
                </div>
                <div class="dpad-btn-wrapper dpad-right">
                    <div class="control-btn" data-key="d">▶</div>
                </div>
            </div>

            <!-- Fire Button -->
            <div class="fire-btn-wrapper">
                <div class="control-btn btn-fire" data-key="space">발사</div>
            </div>
        </div>
    </div>

    <!-- Menu Overlay -->
    <div id="ui-menu" class="overlay overlay-menu hidden">
        <h1 class="game-title">
            MATH TRAUMA
        </h1>
        <div class="card">
            <p class="card-text">
                복셀 우주선을 조종하여 합성수들을 파괴하세요.
            </p>
            <div class="alert-box alert-red">
                <span class="alert-title text-red">경고: 아래 대상은 공격하지 마세요!</span>
                <ul class="alert-list">
                    <li>소수 (Prime Number)</li>
                    <li>소수의 2배수 (2 × Prime)</li>
                </ul>
            </div>
            <div class="alert-box alert-yellow">
                <span class="alert-title text-yellow">승리 조건:</span>
                <p>제한시간 60초 안에 <span class="text-white font-bold">150점</span> 이상 획득</p>
            </div>
            <button id="btn-start" class="btn-primary">
                미션 시작
            </button>
        </div>
    </div>

    <!-- Game Over Overlay -->
    <div id="ui-gameover" class="overlay overlay-gameover hidden">
        <h1 id="game-over-title" class="gameover-title">실패</h1>
        <p id="game-over-reason" class="gameover-reason">이유를 알 수 없음</p>

        <div class="final-score-box">
            <span class="score-label">최종 점수</span>
            <span id="final-score" class="value-text">0</span>
        </div>

        <button id="btn-retry" class="btn-white">
            재시도
        </button>
    </div>

    <script type="module" src="./index.js"></script>
</body>

</html>